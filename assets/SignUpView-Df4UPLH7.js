import{r as m,c as d,a as l,w as t,b as f,v as i,t as c,i as w,d as b,f as C,P as x,o as p}from"./index-FGZk96Ly.js";const y={id:"signUpPage",class:"bg-yellow"},k={class:"conatiner signUpPage vhContainer"},U={class:"formControls",action:"index.html"},V={key:0,style:{"align-self":"center","padding-top":"3px"}},S={__name:"SignUpView",setup(P){const a=m({nickname:"",email:"",password:""}),s=m(""),r=m(""),u=w("LoadingConfig"),g=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.trim()),v=async()=>{if(s.value="",a.value.password!==r.value){s.value="兩次密碼欄位輸入不一致";return}if(a.value.nickname===""||a.value.email===""||a.value.password===""){s.value="欄位不可留空";return}if(!g(a.value.email)){s.value="Email 帳號格式不正確";return}u.value.message="註冊中…",u.value.modelValue=!0,s.value="",await b.post(C(x),a.value).then(o=>{console.log("signup response:",o),o.value=o.data.uid,alert(`${a.value.nickname} 你好，你已註冊成功`),window.location.href="#/"}).catch(o=>{console.log("錯誤！"),console.log(o),s.value="錯誤:"+o.response.data.message}).finally(()=>{u.value.modelValue=!1})};return(o,e)=>(p(),d("div",y,[l("div",k,[e[10]||(e[10]=l("div",{class:"side"},[l("a",{href:"#"},[l("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),l("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),l("div",null,[l("form",U,[e[4]||(e[4]=l("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[5]||(e[5]=l("label",{class:"formControls_label",for:"email"},"Email",-1)),t(l("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":e[0]||(e[0]=n=>a.value.email=n)},null,512),[[i,a.value.email]]),e[6]||(e[6]=l("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),t(l("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":e[1]||(e[1]=n=>a.value.nickname=n)},null,512),[[i,a.value.nickname]]),e[7]||(e[7]=l("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),t(l("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[2]||(e[2]=n=>a.value.password=n)},null,512),[[i,a.value.password]]),e[8]||(e[8]=l("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),t(l("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":e[3]||(e[3]=n=>r.value=n)},null,512),[[i,r.value]]),s.value?(p(),d("span",V,c(s.value),1)):f("",!0),l("input",{class:"formControls_btnSubmit",type:"button",onClick:v,value:"註冊帳號"}),e[9]||(e[9]=l("a",{class:"formControls_btnLink",href:"#"},"登入",-1))])])])]))}};export{S as default};
